{
  "version": 3,
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/components/card/Card.tsx"],"sourcesContent":["\"use client\";\r\nimport \"./Card.css\";\r\nimport Link from \"next/link\";\r\nimport axios from \"axios\"\r\nimport { useAddProductCartMutation } from \"@/lib/redux/service/cartProductsAPI\";\r\nimport { useDispatch, useSelector } from \"@/lib/redux/hooks\";\r\nimport { addCart } from \"@/lib/redux/features/cartItemsSlice\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { productPayment, productPaymentId } from \"@/lib/redux/features/paymentSlice\";\r\nimport { useGetProductsCartQuery } from \"@/lib/redux/service/cartProductsAPI\";\r\nimport { useGetProductQuery } from \"@/lib/redux/service/productsAPI\";\r\nimport { addTotalCart } from \"@/lib/redux/features/cartItemsSlice\";\r\n\r\ninterface props {\r\n  itemId: string;\r\n  name: string;\r\n  brand: string;\r\n  image: string;\r\n  price: string;\r\n  stock: string;\r\n}\r\n\r\nconst Card: React.FC<props> = ({ itemId, name, brand, image, price, stock }) => {\r\n\r\n  const dispatch=useDispatch()\r\n  \r\n  const products=useSelector((state)=>state.payments.productPayment)\r\n\r\n  const paymentId=useSelector((state)=>state.payments.paymentId)\r\n\r\n\r\n  const [mutate] = useAddProductCartMutation();\r\n  const { id } = useSelector((state) => state.userProfile);\r\n  const { cartItems } = useSelector((state) => state.cartItems);\r\n  const { data } = useGetProductsCartQuery({ id });\r\n\r\n  const { data: product, isLoading, isError } = useGetProductQuery(\r\n    { id: itemId },\r\n  )\r\n  \r\n  const handleAddCart = () => {\r\n    mutate({\r\n      itemId,\r\n      userId: id,\r\n    })\r\n    dispatch(addCart(product));\r\n  };\r\n\r\n  const createPreference=async()=>{\r\n    try {\r\n      const URL = ``\r\n      console.log(URL);\r\n      \r\n      const response=await axios.post(`${URL}/api/products/buyProduct`, {\r\n        itemId:itemId,\r\n        description: name,\r\n        price:price,\r\n        quantity:1\r\n      })\r\n      const {id}=response.data\r\n      return id\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const handleBuy=async()=>{\r\n\r\n    const id=await createPreference()\r\n    \r\n    if(id){\r\n      dispatch(productPayment({\r\n        image:image,\r\n        name:name,\r\n        price:price,\r\n        brand:brand\r\n      }))\r\n\r\n      dispatch(productPaymentId(id))\r\n    }\r\n    \r\n\r\n  }\r\n  return (\r\n    <div className=\"card flex flex-col\">\r\n      <div className=\"card-img flex justify-center items-center\">\r\n        <img src={image} />\r\n        <p>vence en 5 dias</p>\r\n      </div>\r\n      <div className=\"card-info flex flex-col\">\r\n        <Link href={`home/product/${itemId}`}>\r\n          <h3 className=\"text-center\">{name}</h3>\r\n        </Link>\r\n        <div className=\"rate flex flex-row justify-center gap-4 items-center\">\r\n          <p> ‚≠ê 4.5</p>\r\n          <p>{brand}</p>\r\n        </div>\r\n        <div className=\"price flex flex-row justify-center items-center gap-4\">\r\n          <p className=\"total\">$ 5500</p>\r\n          <p>$ {price}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"card-buy flex flex-row justify-evenly items-center\">\r\n        <div className=\"buy\" onClick={handleBuy}>\r\n          <p>Buy</p>\r\n        </div>\r\n        <div className=\"cart flex flex-col justify-center items-center\">\r\n          <button\r\n            onClick={() => handleAddCart()}\r\n            className=\"material-symbols-outlined text-center\"\r\n          >\r\n            shopping_cart\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;;;;;AAsBA,MAAM,OAAwB;QAAC,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;;IAEzE,MAAM,WAAS;IAEf,MAAM,WAAS,iHAAY,CAAC,QAAQ,MAAM,QAAQ,CAAC,cAAc;IAEjE,MAAM,YAAU,iHAAY,CAAC,QAAQ,MAAM,QAAQ,CAAC,SAAS;IAG7D,MAAM,CAAC,OAAO,GAAG;IACjB,MAAM,EAAE,EAAE,EAAE,GAAG,iHAAY,CAAC,QAAU,MAAM,WAAW;IACvD,MAAM,EAAE,SAAS,EAAE,GAAG,iHAAY,CAAC,QAAU,MAAM,SAAS;IAC5D,MAAM,EAAE,IAAI,EAAE,GAAG,kJAAwB;QAAE;IAAG;IAE9C,MAAM,EAAE,MAAM,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,yIAC5C;QAAE,IAAI;IAAO;IAGf,MAAM,gBAAgB;QACpB,OAAO;YACL;YACA,QAAQ;QACV;QACA,SAAS,kIAAQ;IACnB;IAEA,MAAM,mBAAiB;QACrB,IAAI;YACF,MAAM,MAAM,CAAC,CAAC;YACd,QAAQ,GAAG,CAAC;YAEZ,MAAM,WAAS,MAAM,sHAAM,IAAI,CAAC,CAAC,EAAE,IAAI,wBAAwB,CAAC,EAAE;gBAChE,QAAO;gBACP,aAAa;gBACb,OAAM;gBACN,UAAS;YACX;YACA,MAAM,EAAC,EAAE,EAAC,GAAC,SAAS,IAAI;YACxB,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,MAAM,YAAU;QAEd,MAAM,KAAG,MAAM;QAEf,IAAG,IAAG;YACJ,SAAS,uIAAe;gBACtB,OAAM;gBACN,MAAK;gBACL,OAAM;gBACN,OAAM;YACR;YAEA,SAAS,yIAAiB;QAC5B;IAGF;IACA,qBACE,iKAAC;QAAI,WAAU;;0BACb,iKAAC;gBAAI,WAAU;;kCACb,iKAAC;wBAAI,KAAK;;;;;;kCACV,iKAAC;kCAAE;;;;;;;;;;;;0BAEL,iKAAC;gBAAI,WAAU;;kCACb;wBAAM,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;kCAClC,cAAA,iKAAC;4BAAG,WAAU;sCAAe;;;;;;;;;;;kCAE/B,iKAAC;wBAAI,WAAU;;0CACb,iKAAC;0CAAE;;;;;;0CACH,iKAAC;0CAAG;;;;;;;;;;;;kCAEN,iKAAC;wBAAI,WAAU;;0CACb,iKAAC;gCAAE,WAAU;0CAAQ;;;;;;0CACrB,iKAAC;;oCAAE;oCAAG;;;;;;;;;;;;;;;;;;;0BAGV,iKAAC;gBAAI,WAAU;;kCACb,iKAAC;wBAAI,WAAU;wBAAM,SAAS;kCAC5B,cAAA,iKAAC;sCAAE;;;;;;;;;;;kCAEL,iKAAC;wBAAI,WAAU;kCACb,cAAA,iKAAC;4BACC,SAAS,IAAM;4BACf,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA/FM;;;;;;;;;;;;KAAA;uCAiGS"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}